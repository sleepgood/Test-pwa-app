<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanks Lite-Brite</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #333;
            color: #fff;
            font-family: Arial, sans-serif;
            height: 100vh;
            overflow: hidden;
        }

        h1 {
            margin: 20px;
            font-size: 2em;
            text-align: center;
            text-shadow: 0 0 10px #fff, 0 0 20px #fff;
        }

        #grid {
            display: grid;
            grid-template-columns: repeat(20, 25px); /* Larger grid */
            gap: 4px;
            margin-bottom: 20px;
        }

        .peg {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background-color: #111;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            animation: twinkle 2s infinite alternate ease-in-out;
        }

        .peg.active {
            box-shadow: 0 0 15px 5px var(--color), 0 0 30px 15px var(--color);
        }

        #color-picker {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .color-option:hover {
            transform: scale(1.2);
        }

        #clear-button, #save-button {
            padding: 10px 20px;
            background-color: #444;
            border: none;
            border-radius: 5px;
            color: #fff;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: background-color 0.3s;
        }

        #clear-button:hover, #save-button:hover {
            background-color: #666;
        }

        /* Twinkle animation */
        @keyframes twinkle {
            0% { opacity: 0.8; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <h1>Thanks Lite-Brite</h1>
    <div id="grid"></div>
    <div id="color-picker">
        <div class="color-option" style="background-color: red;" data-color="red"></div>
        <div class="color-option" style="background-color: orange;" data-color="orange"></div>
        <div class="color-option" style="background-color: yellow;" data-color="yellow"></div>
        <div class="color-option" style="background-color: green;" data-color="green"></div>
        <div class="color-option" style="background-color: blue;" data-color="blue"></div>
        <div class="color-option" style="background-color: purple;" data-color="purple"></div>
        <div class="color-option" style="background-color: pink;" data-color="pink"></div>
        <div class="color-option" style="background-color: white;" data-color="white"></div>
    </div>
    <button id="clear-button">Clear All</button>
    <button id="save-button">Save Image</button>

    <script>
        const grid = document.getElementById("grid");
        const colorPicker = document.getElementById("color-picker");
        const clearButton = document.getElementById("clear-button");
        const saveButton = document.getElementById("save-button");
        let currentColor = "white";

        // Initialize the grid
        for (let i = 0; i < 20 * 20; i++) { // 20x20 grid
            const peg = document.createElement("div");
            peg.classList.add("peg");
            peg.addEventListener("click", () => togglePeg(peg));
            grid.appendChild(peg);
        }

        // Change current color on color selection
        colorPicker.addEventListener("click", (event) => {
            if (event.target.classList.contains("color-option")) {
                currentColor = event.target.getAttribute("data-color");
                colorPicker.querySelectorAll('.color-option').forEach(option => {
                    option.style.outline = '';
                });
                event.target.style.outline = '2px solid #fff';
            }
        });

        // Toggle peg on/off with selected color
        function togglePeg(peg) {
            if (peg.classList.contains("active")) {
                peg.classList.remove("active");
                peg.style.backgroundColor = "#111";
                peg.style.setProperty("--color", "transparent");
            } else {
                peg.classList.add("active");
                peg.style.backgroundColor = currentColor;
                peg.style.setProperty("--color", currentColor);
            }
        }

        // Clear all pegs
        clearButton.addEventListener("click", () => {
            document.querySelectorAll(".peg").forEach(peg => {
                peg.classList.remove("active");
                peg.style.backgroundColor = "#111";
                peg.style.setProperty("--color", "transparent");
            });
        });

        // Save grid as image
        saveButton.addEventListener("click", () => {
            html2canvas(document.querySelector("#grid")).then(canvas => {
                const link = document.createElement('a');
                link.download = 'lite-brite.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        });

    </script>
    <!-- Include html2canvas library to capture screenshot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>