<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motion Color Changer</title>
    <link rel="manifest" href="./manifest.json">
    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            color: white;
            text-align: center;
        }
        #message {
            font-size: 1.5em;
        }
    </style>
</head>
<body>
    <div id="message">Tilt your phone to change the background color!</div>
    
    <script>
        // Request permission for motion data (necessary on iOS 13+)
        if (typeof DeviceMotionEvent.requestPermission === 'function') {
            DeviceMotionEvent.requestPermission()
                .then(permissionState => {
                    if (permissionState === 'granted') {
                        window.addEventListener('devicemotion', handleMotion);
                    } else {
                        document.getElementById('message').innerText = "Permission for motion data was denied.";
                    }
                })
                .catch(console.error);
        } else {
            window.addEventListener('devicemotion', handleMotion);
        }

        function handleMotion(event) {
            // Get the acceleration along the x, y, and z axes
            const x = event.accelerationIncludingGravity.x || 0;
            const y = event.accelerationIncludingGravity.y || 0;
            const z = event.accelerationIncludingGravity.z || 0;

            // Map the acceleration values to RGB color values
            const red = Math.min(255, Math.abs(Math.floor(x * 20)));
            const green = Math.min(255, Math.abs(Math.floor(y * 20)));
            const blue = Math.min(255, Math.abs(Math.floor(z * 20)));

            // Set the background color based on the accelerometer data
            document.body.style.backgroundColor = `rgb(${red}, ${green}, ${blue})`;
        }
    </script>
</body>
</html>
