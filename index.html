<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thanks Lite-Brite</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #222;
            color: #fff;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }

        h1 {
            margin: 10px;
            font-size: 2em;
            text-align: center;
            text-shadow: 0 0 12px #fff, 0 0 24px #fff;
        }

        #color-picker {
            display: flex;
            gap: 5px;
            margin: 10px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .color-option {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 0 0 4px rgba(255, 255, 255, 0.5);
        }

        .color-option:hover {
            transform: scale(1.2);
        }

        #grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(15px, 1fr));
            gap: 5px;
            max-width: 100vw;
            margin-bottom: 10px;
            padding: 10px;
        }

        .peg {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background-color: #111;
            box-shadow: inset 0 0 2px #000, 0 0 8px rgba(0, 0, 0, 0.6);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            animation: twinkle 3s infinite alternate ease-in-out;
        }

        .peg.active {
            background-color: var(--color);
            box-shadow: 0 0 5px 2px var(--color), 0 0 12px 8px var(--color);
        }

        #controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        #clear-button, #save-button {
            padding: 8px 16px;
            background-color: #444;
            border: none;
            border-radius: 5px;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            width: 120px;
            text-align: center;
            transition: background-color 0.3s;
        }

        #clear-button:hover, #save-button:hover {
            background-color: #666;
        }

        /* Twinkle animation */
        @keyframes twinkle {
            0% { opacity: 1; }
            100% { opacity: 0.95; }
        }
    </style>
</head>
<body>
    <h1>Thanks Lite-Brite</h1>

    <div id="color-picker">
        <div class="color-option" style="background-color: red;" data-color="red"></div>
        <div class="color-option" style="background-color: orange;" data-color="orange"></div>
        <div class="color-option" style="background-color: yellow;" data-color="yellow"></div>
        <div class="color-option" style="background-color: green;" data-color="green"></div>
        <div class="color-option" style="background-color: blue;" data-color="blue"></div>
        <div class="color-option" style="background-color: purple;" data-color="purple"></div>
        <div class="color-option" style="background-color: pink;" data-color="pink"></div>
        <div class="color-option" style="background-color: white;" data-color="white"></div>
    </div>

    <div id="grid"></div>

    <div id="controls">
        <button id="clear-button">Clear All</button>
        <button id="save-button">Save Image</button>
    </div>

    <script>
        const grid = document.getElementById("grid");
        const colorPicker = document.getElementById("color-picker");
        const clearButton = document.getElementById("clear-button");
        const saveButton = document.getElementById("save-button");
        let currentColor = "white";

        // Create a grid with smaller, defined pegs
        const totalPegs = 30 * 25; // Adjust grid size to better fit the screen
        for (let i = 0; i < totalPegs; i++) {
            const peg = document.createElement("div");
            peg.classList.add("peg");
            peg.addEventListener("click", () => togglePeg(peg));
            grid.appendChild(peg);
        }

        // Change current color on color selection
        colorPicker.addEventListener("click", (event) => {
            if (event.target.classList.contains("color-option")) {
                currentColor = event.target.getAttribute("data-color");
                colorPicker.querySelectorAll('.color-option').forEach(option => {
                    option.style.outline = '';
                });
                event.target.style.outline = '2px solid #fff';
            }
        });

        // Toggle peg on/off with selected color
        function togglePeg(peg) {
            if (peg.classList.contains("active")) {
                peg.classList.remove("active");
                peg.style.backgroundColor = "#111";
                peg.style.setProperty("--color", "transparent");
            } else {
                peg.classList.add("active");
                peg.style.backgroundColor = currentColor;
                peg.style.setProperty("--color", currentColor);
            }
        }

        // Clear all pegs
        clearButton.addEventListener("click", () => {
            document.querySelectorAll(".peg").forEach(peg => {
                peg.classList.remove("active");
                peg.style.backgroundColor = "#111";
                peg.style.setProperty("--color", "transparent");
            });
        });

        // Save grid as image
        saveButton.addEventListener("click", () => {
            html2canvas(document.body, { scale: 2, x: 0, y: 0, width: document.body.scrollWidth, height: document.body.scrollHeight }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'lite-brite.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        });
    </script>
    <!-- Include html2canvas library to capture screenshot -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>